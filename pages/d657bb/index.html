<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>浏览器多进程架构及工作原理 | 呢呢 Blog</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/blog/img/favicon.ico">
    <script data-ad-client="ca-pub-7828333725993554" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="记录工作生活中美好的事，好事正在发生.0.">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/blog/assets/css/0.styles.d9ef018a.css" as="style"><link rel="preload" href="/blog/assets/js/app.93650501.js" as="script"><link rel="preload" href="/blog/assets/js/2.28e4b149.js" as="script"><link rel="preload" href="/blog/assets/js/38.e1cdaafe.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.9e0510ef.js"><link rel="prefetch" href="/blog/assets/js/11.88fc389a.js"><link rel="prefetch" href="/blog/assets/js/12.4a845505.js"><link rel="prefetch" href="/blog/assets/js/13.b7d62b7d.js"><link rel="prefetch" href="/blog/assets/js/14.39b2bdb8.js"><link rel="prefetch" href="/blog/assets/js/15.23c13f3b.js"><link rel="prefetch" href="/blog/assets/js/16.832736af.js"><link rel="prefetch" href="/blog/assets/js/17.4fc8c543.js"><link rel="prefetch" href="/blog/assets/js/18.8973e14b.js"><link rel="prefetch" href="/blog/assets/js/19.e87049cf.js"><link rel="prefetch" href="/blog/assets/js/20.1ba87a69.js"><link rel="prefetch" href="/blog/assets/js/21.c49403d8.js"><link rel="prefetch" href="/blog/assets/js/22.727d929c.js"><link rel="prefetch" href="/blog/assets/js/23.8c193855.js"><link rel="prefetch" href="/blog/assets/js/24.cf633a66.js"><link rel="prefetch" href="/blog/assets/js/25.c2db7d60.js"><link rel="prefetch" href="/blog/assets/js/26.4efea5ae.js"><link rel="prefetch" href="/blog/assets/js/27.1b22c9fa.js"><link rel="prefetch" href="/blog/assets/js/28.1f5cf270.js"><link rel="prefetch" href="/blog/assets/js/29.102945ce.js"><link rel="prefetch" href="/blog/assets/js/3.32110a4e.js"><link rel="prefetch" href="/blog/assets/js/30.e037aae9.js"><link rel="prefetch" href="/blog/assets/js/31.2b8f5544.js"><link rel="prefetch" href="/blog/assets/js/32.ee4998b2.js"><link rel="prefetch" href="/blog/assets/js/33.58fd29e0.js"><link rel="prefetch" href="/blog/assets/js/34.dfc2c0ae.js"><link rel="prefetch" href="/blog/assets/js/35.d52cc4b4.js"><link rel="prefetch" href="/blog/assets/js/36.63432317.js"><link rel="prefetch" href="/blog/assets/js/37.96ba4f27.js"><link rel="prefetch" href="/blog/assets/js/39.725a4e4b.js"><link rel="prefetch" href="/blog/assets/js/4.29aa5b00.js"><link rel="prefetch" href="/blog/assets/js/40.e17c9843.js"><link rel="prefetch" href="/blog/assets/js/41.21852281.js"><link rel="prefetch" href="/blog/assets/js/42.f699d171.js"><link rel="prefetch" href="/blog/assets/js/43.269ed25c.js"><link rel="prefetch" href="/blog/assets/js/44.9c561b5e.js"><link rel="prefetch" href="/blog/assets/js/45.ed00ed0f.js"><link rel="prefetch" href="/blog/assets/js/46.4038b2ab.js"><link rel="prefetch" href="/blog/assets/js/47.9d8e3145.js"><link rel="prefetch" href="/blog/assets/js/48.04325e82.js"><link rel="prefetch" href="/blog/assets/js/49.cc603a87.js"><link rel="prefetch" href="/blog/assets/js/5.e82aaf3e.js"><link rel="prefetch" href="/blog/assets/js/50.05afb873.js"><link rel="prefetch" href="/blog/assets/js/51.b4e36895.js"><link rel="prefetch" href="/blog/assets/js/52.4659961c.js"><link rel="prefetch" href="/blog/assets/js/53.15384669.js"><link rel="prefetch" href="/blog/assets/js/54.07b8b72b.js"><link rel="prefetch" href="/blog/assets/js/55.8d1aa69e.js"><link rel="prefetch" href="/blog/assets/js/56.18092cdd.js"><link rel="prefetch" href="/blog/assets/js/57.e87d999f.js"><link rel="prefetch" href="/blog/assets/js/58.72b276e4.js"><link rel="prefetch" href="/blog/assets/js/59.52e04d93.js"><link rel="prefetch" href="/blog/assets/js/6.f8da1e65.js"><link rel="prefetch" href="/blog/assets/js/60.43e54787.js"><link rel="prefetch" href="/blog/assets/js/61.c1c70928.js"><link rel="prefetch" href="/blog/assets/js/62.d7a176a3.js"><link rel="prefetch" href="/blog/assets/js/63.ebd78dcb.js"><link rel="prefetch" href="/blog/assets/js/64.0809e501.js"><link rel="prefetch" href="/blog/assets/js/65.b7eb1fb4.js"><link rel="prefetch" href="/blog/assets/js/66.7abccf5a.js"><link rel="prefetch" href="/blog/assets/js/67.5e4bf32c.js"><link rel="prefetch" href="/blog/assets/js/68.d32892b7.js"><link rel="prefetch" href="/blog/assets/js/69.0a944bc3.js"><link rel="prefetch" href="/blog/assets/js/7.4bb2d2e0.js"><link rel="prefetch" href="/blog/assets/js/70.2384b336.js"><link rel="prefetch" href="/blog/assets/js/71.2ec0a8c9.js"><link rel="prefetch" href="/blog/assets/js/72.60657d2e.js"><link rel="prefetch" href="/blog/assets/js/73.e1822078.js"><link rel="prefetch" href="/blog/assets/js/74.7c1bf36e.js"><link rel="prefetch" href="/blog/assets/js/75.2045a39b.js"><link rel="prefetch" href="/blog/assets/js/76.5a125b10.js"><link rel="prefetch" href="/blog/assets/js/77.b636f559.js"><link rel="prefetch" href="/blog/assets/js/78.b13ba78a.js"><link rel="prefetch" href="/blog/assets/js/79.075a03c2.js"><link rel="prefetch" href="/blog/assets/js/8.1dde4c64.js"><link rel="prefetch" href="/blog/assets/js/80.7a88ef29.js"><link rel="prefetch" href="/blog/assets/js/81.0f5f848e.js"><link rel="prefetch" href="/blog/assets/js/82.ea6dd25d.js"><link rel="prefetch" href="/blog/assets/js/83.9eecfd75.js"><link rel="prefetch" href="/blog/assets/js/84.a30ce054.js"><link rel="prefetch" href="/blog/assets/js/85.f71d1cf8.js"><link rel="prefetch" href="/blog/assets/js/86.409010aa.js"><link rel="prefetch" href="/blog/assets/js/87.3a428f01.js"><link rel="prefetch" href="/blog/assets/js/88.78c6c7be.js"><link rel="prefetch" href="/blog/assets/js/89.5784a334.js"><link rel="prefetch" href="/blog/assets/js/9.130b3d11.js"><link rel="prefetch" href="/blog/assets/js/90.3cf5c75e.js"><link rel="prefetch" href="/blog/assets/js/91.5ab8fc80.js"><link rel="prefetch" href="/blog/assets/js/92.1a41780e.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.d9ef018a.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><img src="/blog/img/logo.png" alt="呢呢 Blog" class="logo"> <span class="site-name can-hide">呢呢 Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程" class="dropdown-title"><a href="/blog/web/" class="link-title">编程</a> <span class="title" style="display:none;">编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/pages/7caa55/" class="nav-link">web Worker使用笔记</a></li></ul></li><li class="dropdown-item"><h4>博客搭建</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/pages/41f87d890d0a02af/" class="nav-link">快速上手</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog/writings/" class="nav-link">文集</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档" class="dropdown-title"><a href="/blog/docs/" class="link-title">文档</a> <span class="title" style="display:none;">文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/7a91be2d502346ce/" class="nav-link">前端公用方法</a></li></ul></div></div><div class="nav-item"><a href="/blog/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><a href="/blog/pages/beb6c0bd8a66cea6/" class="link-title">收藏</a> <span class="title" style="display:none;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/beb6c0bd8a66cea6/" class="nav-link">网站</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/eee83a9211a70f9d/" class="nav-link">资源</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/12df8ace52d493f6/" class="nav-link">Vue资源</a></li><li class="dropdown-item"><!----> <a href="/blog/friends/" class="nav-link">友情链接</a></li></ul></div></div> <a href="https://github.com//julie7366/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程" class="dropdown-title"><a href="/blog/web/" class="link-title">编程</a> <span class="title" style="display:none;">编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>前端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/pages/7caa55/" class="nav-link">web Worker使用笔记</a></li></ul></li><li class="dropdown-item"><h4>博客搭建</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog/pages/41f87d890d0a02af/" class="nav-link">快速上手</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/blog/writings/" class="nav-link">文集</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档" class="dropdown-title"><a href="/blog/docs/" class="link-title">文档</a> <span class="title" style="display:none;">文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/7a91be2d502346ce/" class="nav-link">前端公用方法</a></li></ul></div></div><div class="nav-item"><a href="/blog/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><a href="/blog/pages/beb6c0bd8a66cea6/" class="link-title">收藏</a> <span class="title" style="display:none;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/pages/beb6c0bd8a66cea6/" class="nav-link">网站</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/eee83a9211a70f9d/" class="nav-link">资源</a></li><li class="dropdown-item"><!----> <a href="/blog/pages/12df8ace52d493f6/" class="nav-link">Vue资源</a></li><li class="dropdown-item"><!----> <a href="/blog/friends/" class="nav-link">友情链接</a></li></ul></div></div> <a href="https://github.com//julie7366/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>博客搭建</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>微前端</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Cesium天地图</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>bug记录</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vuepress</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>浏览器架构及原理</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/pages/9ff194/" class="sidebar-link">前端性能优化</a></li><li><a href="/blog/pages/d657bb/" aria-current="page" class="active sidebar-link">浏览器多进程架构及工作原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/pages/d657bb/#前言" class="sidebar-link">前言</a></li><li class="sidebar-sub-header"><a href="/blog/pages/d657bb/#一、浏览器的多进程架构" class="sidebar-link">一、浏览器的多进程架构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/pages/d657bb/#_1、进程与线程的解释" class="sidebar-link">1、进程与线程的解释</a></li><li class="sidebar-sub-header"><a href="/blog/pages/d657bb/#_2、浏览器的架构" class="sidebar-link">2、浏览器的架构</a></li><li class="sidebar-sub-header"><a href="/blog/pages/d657bb/#_3、不同进程负责的浏览器区域示意图" class="sidebar-link">3、不同进程负责的浏览器区域示意图</a></li><li class="sidebar-sub-header"><a href="/blog/pages/d657bb/#_4、chrome-多进程架构的优缺点" class="sidebar-link">4、Chrome 多进程架构的优缺点</a></li><li class="sidebar-sub-header"><a href="/blog/pages/d657bb/#_5、iframe的渲染-site-isolation" class="sidebar-link">5、iframe的渲染 -- Site Isolation</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/pages/d657bb/#二、导航过程发生了什么" class="sidebar-link">二、导航过程发生了什么</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/pages/d657bb/#_1-处理输入" class="sidebar-link">1. 处理输入</a></li><li class="sidebar-sub-header"><a href="/blog/pages/d657bb/#_2-开始导航" class="sidebar-link">2. 开始导航</a></li><li class="sidebar-sub-header"><a href="/blog/pages/d657bb/#_3-读取响应" class="sidebar-link">3. 读取响应</a></li><li class="sidebar-sub-header"><a href="/blog/pages/d657bb/#_4-查找渲染进程" class="sidebar-link">4. 查找渲染进程</a></li><li class="sidebar-sub-header"><a href="/blog/pages/d657bb/#_5-确认导航" class="sidebar-link">5. 确认导航</a></li><li class="sidebar-sub-header"><a href="/blog/pages/d657bb/#_6-额外的步骤" class="sidebar-link">6. 额外的步骤</a></li><li class="sidebar-sub-header"><a href="/blog/pages/d657bb/#_7-关于页面生命周期" class="sidebar-link">7. 关于页面生命周期</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/pages/d657bb/#三、-renderer-process-工作流程" class="sidebar-link">三、 Renderer process 工作流程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/pages/d657bb/#渲染流程及各线程职责" class="sidebar-link">渲染流程及各线程职责</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/pages/d657bb/#_4、浏览器对事件的处理" class="sidebar-link">4、浏览器对事件的处理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/pages/d657bb/#事件处理" class="sidebar-link">事件处理</a></li><li class="sidebar-sub-header"><a href="/blog/pages/d657bb/#查找事件对象" class="sidebar-link">查找事件对象</a></li><li class="sidebar-sub-header"><a href="/blog/pages/d657bb/#事件的优化" class="sidebar-link">事件的优化</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>photoshop</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue3+vite</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>react</span> <span class="arrow right"></span></p> <!----></section></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- 正方形 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1cd794fe><div class="articleInfo" data-v-1cd794fe><ul class="breadcrumbs" data-v-1cd794fe><li data-v-1cd794fe><a href="/blog/" title="首页" class="iconfont icon-home router-link-active" data-v-1cd794fe></a></li> <li data-v-1cd794fe><a href="/blog/web" title="编程-目录页" data-v-1cd794fe>编程</a></li> <li data-v-1cd794fe><a href="/blog/web/#浏览器架构及原理" title="编程#浏览器架构及原理" data-v-1cd794fe>浏览器架构及原理</a></li> <!----></ul> <div class="info" data-v-1cd794fe><div title="作者" class="author iconfont icon-touxiang" data-v-1cd794fe><a href="https://github.com/julie7366" target="_blank" title="作者" class="beLink" data-v-1cd794fe>Ni Ni</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1cd794fe><a href="javascript:;" data-v-1cd794fe>2021-02-20</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">
          浏览器多进程架构及工作原理
        </h1> <div class="page-slot page-slot-top"><!-- 固定100% * 90px可显示，max-height:90px未见显示-->
     <ins class="adsbygoogle"
          style="display:inline-block;width:100%;max-height:90px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6625304284"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="theme-vdoing-content content__default"><h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p>常常听到这样的话，前端工程师必须理解浏览器的<code>工作原理</code></p> <p>从浏览器输入地址栏短短几秒内做了什么东西</p> <p>各种代码优化方案为什么能起到优化</p> <p>以及浏览器的渲染流程</p> <p>看过辣么多的浏览器工作原理，这家是最好的 <a href="https://zhuanlan.zhihu.com/p/47407398" target="_blank" rel="noopener noreferrer">参考链接<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="一、浏览器的多进程架构"><a href="#一、浏览器的多进程架构" class="header-anchor">#</a> 一、浏览器的多进程架构</h2> <p>一个好的程序常常会被划分成几个相互独立又彼此配合的模块，以chrome浏览器为例</p> <p>它是由多个进程组成，每个进程都有自己的核心职责，它们相互配合完成浏览器的整体功能</p> <p>每个进程又包含多个线程，一个进程内的多个线程也会协同工作，配合所在进程的职责</p> <h3 id="_1、进程与线程的解释"><a href="#_1、进程与线程的解释" class="header-anchor">#</a> 1、进程与线程的解释</h3> <p><a href="http://www.ruanyifeng.com/blog/2013/04/processes_and_threads.html" target="_blank" rel="noopener noreferrer">进程与线程的解释<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="_2、浏览器的架构"><a href="#_2、浏览器的架构" class="header-anchor">#</a> 2、浏览器的架构</h3> <p>如果需要开发一个浏览器，它可以是单进程多线程应用，也可以是使用IPC通信的多线程应用</p> <p>以Chrome浏览器为例进行说明</p> <ol><li>Browser Process
<ul><li>负责地址栏，书签栏，进退按钮等部分的工作</li> <li>负责处理浏览器的一些不可见的底层操作，比如网络请求和文件访问</li></ul></li> <li>Renderer Process
<ul><li>负责一个 tab 内关于网页呈现的所有事情 解析HTML及css，将解析结果显示出来</li> <li>JS解释器：用来解析执行JS代码</li></ul></li> <li>Plugin Process
<ul><li>负责一个网页内用到的插件，如flush</li></ul></li> <li>GPU Process
<ul><li>负责处理GPU相关的任务
如果Chrome浏览器运行的硬件设备不够好时，下面这些进程会合并到Browser Process</li></ul></li> <li>Networking Process ：完成网络请求，例如http请求，具有平台无关的接口，可以在不同平台上工作</li> <li>UI后端 Process：用来绘制 组合选择框，对话框基本组件（alert，confirm），具有不特定于某个平台的通用接口，底层使用操作系统的用户接口</li> <li>Storage Process 属于持久层，浏览器需要在硬盘中保存类似Cookie的各种数据，HTML5定义了 web database技术</li></ol> <div class="center-container"><h3 id="_3、不同进程负责的浏览器区域示意图"><a href="#_3、不同进程负责的浏览器区域示意图" class="header-anchor">#</a> 3、不同进程负责的浏览器区域示意图</h3></div><p><img src="https://pic3.zhimg.com/80/v2-de9e1fee7f8cd6a7572c280e36e7fb7a_720w.jpg" alt="进程图"></p> <p>Chrome 提供<code>任务管理器</code>查看当前浏览器中运行的所有进程及每个进程占用的系统资源</p> <p>通过「页面右上角的三个点点点 --- 更多工具 --- 任务管理器」即可打开相关面板，</p> <h3 id="_4、chrome-多进程架构的优缺点"><a href="#_4、chrome-多进程架构的优缺点" class="header-anchor">#</a> 4、Chrome 多进程架构的优缺点</h3> <h4 id="优点"><a href="#优点" class="header-anchor">#</a> 优点</h4> <ol><li>一个渲染进程出问题不会影响其他进程</li> <li>更为安全，在系统层面上限定了不同进程的全新</li></ol> <h4 id="缺点"><a href="#缺点" class="header-anchor">#</a> 缺点</h4> <ol><li>不同进程间的内存<code>不共享</code> 不同进程的内存常常需要包含相同的内容</li> <li>为节省内存，Chrome 限制了最多的进程数，最大进程数量由设备的内存和CPU能力决定
当达到这个限制时，新打开的Tab会共用之前同一个站点的渲染进程</li></ol> <blockquote><p>测试了一下在 Chrome 中打开不断打开知乎首页，在 Mac i5 8g 上可以启动四十多个渲染进程，之后新打开 tab 会合并到已有的渲染进程中。</p></blockquote> <p>Chrome 把浏览器不同程序的功能看做服务,这些服务可以很方便的分割为不同的进程或者合并为一个进程。
以Broswer Process 为例，如果Chrome运行在强大的硬件上，它会分割不同的服务到不同的进程，这样Chrome整体的运行会更加的稳定，如果运行到硬件条件不是那么好的设备上，这些服务会合并到同一个进程中运行，这样可以节省内存</p> <blockquote><p>也就是说，不同性能的硬件，进程的划分也会不同</p></blockquote> <h3 id="_5、iframe的渲染-site-isolation"><a href="#_5、iframe的渲染-site-isolation" class="header-anchor">#</a> 5、iframe的渲染 -- Site Isolation</h3> <p>Site Isolation 机制从 Chrome 67 开始默认启用。这种机制允许在同一个 Tab 下的跨站 iframe 使用单独的进程来渲染，这样会更为安全。</p> <div class="center-container"><h4 id="iframe-会采用不同的渲染进程"><a href="#iframe-会采用不同的渲染进程" class="header-anchor">#</a> iframe 会采用不同的渲染进程</h4></div><p><img src="https://pic1.zhimg.com/80/v2-a816a4ad673a9c3505effed3e63d94e0_720w.jpg" alt="iframe 会采用不同的渲染进程"></p> <p>回到最开始的问题</p> <h2 id="二、导航过程发生了什么"><a href="#二、导航过程发生了什么" class="header-anchor">#</a> 二、导航过程发生了什么</h2> <p>我们知道浏览器Tab外的工作主要用Browser Process 控制的，Browser Process 又对这些工作进一步划分，使用不同线程进行处理</p> <ul><li>UI thread ： 控制浏览器上的按钮及输入框</li> <li>network thread：处理网络请求，从网上获取数据</li> <li>storage thread：控制文件等的访问</li></ul> <p>处理过程</p> <h3 id="_1-处理输入"><a href="#_1-处理输入" class="header-anchor">#</a> 1. 处理输入</h3> <ul><li>UI thread 判断用户输入的是URL还是query</li></ul> <h3 id="_2-开始导航"><a href="#_2-开始导航" class="header-anchor">#</a> 2. 开始导航</h3> <ul><li>当用户点击回车键，UI thread 通知network Thread 获取网页内容，并控制tab的spinner 展现，表示正在加载中</li> <li>network thread 会执行<code>DNS</code>(域名系统)查询，随后为请求建立<code>TLS</code>（安全传输层协议）链接</li> <li>如果network thread 接收到重定向请求如301，<code>network thread</code> 会通知 <code>UI thread</code> 服务器要求重定向,之后，另外一个url请求会别触发</li></ul> <h3 id="_3-读取响应"><a href="#_3-读取响应" class="header-anchor">#</a> 3. 读取响应</h3> <ul><li>请求响应返回时，network thread 会依据 <code>Content-Type</code> 及<code>MiMe Type sniffing</code>（媒体类型）来判断响应内容的格式</li> <li>如果响应内容的格式是HTML，则将这些数据传递给renderer Process ，如果是zip 或其他文件，会把相关数据传递给下载器
-<a href="https://baijiahao.baidu.com/s?id=1676601694144281400&amp;wfr=spider&amp;for=pc" target="_blank" rel="noopener noreferrer">SafeBrowsing<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 触发安全浏览检查，如果域名请求内容匹配到一个恶意站点 network Thread 会展示一个警告页，此外 <a href="https://www.cnblogs.com/oneasdf/p/9525490.html" target="_blank" rel="noopener noreferrer">CORB<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 检测也会触发确保敏感数据不会被传递给渲染进程。</li></ul> <h3 id="_4-查找渲染进程"><a href="#_4-查找渲染进程" class="header-anchor">#</a> 4. 查找渲染进程</h3> <ul><li>当上述所有检查完成，network Thread 确信浏览器可以导航到请求网页，network thread 会通知UI thread 数据已经准备好，UI thread 会查找到一个 renderer process 进行网页渲染</li></ul> <blockquote><p>由于网络请求获取响应需要时间，这里其实还存在着一个加速方案。当 UI thread 发送 URL 请求给 network thread 时，浏览器其实已经知道了将要导航到那个站点。UI thread 会并行的预先查找和启动一个渲染进程，如果一切正常，当 network thread 接收到数据时，渲染进程已经准备就绪了，但是如果遇到重定向，准备好的渲染进程也许就不可用了，这时候就需要重启一个新的渲染进程。</p></blockquote> <h3 id="_5-确认导航"><a href="#_5-确认导航" class="header-anchor">#</a> 5. 确认导航</h3> <ul><li>讲过了上述过程，数据以及渲染进程都可用了，Browser Process 会给renderer process 发送IPC（进程间通信）消息来确定导航，一旦Browser Process 收到 renderer process 的渲染确认消息，导航过程结束，页面加载开始</li> <li>此时，地址栏会更新，展示出新页面的网页信息。history tab 会更新，可通过返回键，返回上一个页面，为了让关闭tab或者窗口便于恢复，这些信息会放在硬盘中。</li></ul> <h3 id="_6-额外的步骤"><a href="#_6-额外的步骤" class="header-anchor">#</a> 6. 额外的步骤</h3> <ul><li>一旦导航被确认，renderer process 会使用相关资源渲染页面，渲染结束（包括iframe的都触发了onload）发送IPC信号到Browser process ，UI thread 停止tab中loadding</li> <li>所有的js代码都是由renderer process 控制的，所以再浏览网页内容基本上不设计其他进程。<code>beforeunload</code>时会涉及到 Browser process 与Renderer prcess 的交互，当关闭页面时（关闭或者刷新）Browser process需要通知renderer process 进行相关处理</li> <li>如果导航由 renderer process 触发（link=&quot;www.baidu.com&quot;或者location.href）renderer process 首先会检查是否有<code>beforeunload</code>事件，然后由renderer process传递给Browser process</li> <li>如果导航到新的网站，会启用一个新的renderer process 渲染页面，老进程会用来处理类似<code>unload</code>等事件</li></ul> <blockquote><p>浏览器发送IPC消息到新渲染进程渲染页面，同时通知旧渲染进程卸载</p></blockquote> <ul><li>使用 Service worker 的流程会有些许不同</li></ul> <blockquote><p>当Service Worker 被注册时，其作用域会被保存，当有导航时，network thread会再注册的Service worker 的作用域中检查相关域名，如果存在相应的Service Worker，UI thread 会找到一个renderer process 来处理相关代码 Service Worker 可能会从 cache 中加载数据，从而终止对网络的请求，也可能从网上请求新的数据。</p></blockquote> <h3 id="_7-关于页面生命周期"><a href="#_7-关于页面生命周期" class="header-anchor">#</a> 7. 关于页面生命周期</h3> <p>参考 <a href="http://www.ruanyifeng.com/blog/2018/11/page_lifecycle_api.html" target="_blank" rel="noopener noreferrer">Page Lifecycle API 教程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="三、-renderer-process-工作流程"><a href="#三、-renderer-process-工作流程" class="header-anchor">#</a> 三、 Renderer process 工作流程</h2> <p>渲染进程的核心目的是将HTML、CSS、JS转化为可交互的web页面，渲染进程主要包含一下线程</p> <ul><li>主线程 Main thread</li> <li>工作线程 Worker thread</li> <li>排版线程 Compositor thread</li> <li>光栅线程 Raster thread</li></ul> <h3 id="渲染流程及各线程职责"><a href="#渲染流程及各线程职责" class="header-anchor">#</a> 渲染流程及各线程职责</h3> <ol><li>构建dom
<ul><li>渲染进程接受到导航的确认消息，开始接受HTML数据，主线程解析文本字符串为DOM</li></ul></li> <li>加载次级资源
<ul><li>css js 额外资源 需要从网络上或者cache中获取，主进程在构建DOM过程中会逐一请求他们，为了加速 preload scanner会同时进行</li> <li>html中存在<code>img</code> <code>link</code> 等标签，preload scanner 会将这些请求传递给browser process 中的newwrok thread 进行相关资源下载</li></ul></li> <li>js的下载与执行
<ul><li>当遇见<code>&lt;script&gt;</code> 标签时，渲染进程会阻塞</li> <li>如果资源内不会改变<code>DOM</code> 结构 可使用 <code>async</code> <code>defer</code> 等属性，浏览器就会异步加载js，不会造成阻塞</li></ul></li> <li>样式计算
<ul><li>渲染进程主线程计算每一个元素节点的最终样式值</li></ul></li> <li>获取布局
<ul><li>主线程遍历 DOM 及 对应元素的样式，构建出布局树</li> <li>渲染一个完整的页面，需要知道每个节点的具体演示及其位置</li> <li>遍历DOM及相关元素的计算样式，主线程会构建出包含每个元素及坐标信息的盒子大小的布局树。</li></ul></li> <li>绘制各元素
<ul><li>主线程依据布局树构建绘制记录</li></ul></li> <li>合成帧
<ul><li>主线程遍历布局树创建层树(layer tree),添加<code>will-change</code> css属性会被看做单独的一层</li> <li>确定渲染顺序，主线程会把信息传递给接合器线程，合成器会栅格化每一层。有的层可以达到整个页面的大小
，因此，合成器将它们分成了多个磁贴，并将每个磁贴发送到栅格线程</li> <li>栅格线程会栅格化每个磁贴并存储在GPU中</li> <li>一旦磁贴被光栅化，合成器线程会手机为绘制四边形磁贴信息以绘制合成帧</li> <li>合成帧随后会通过IPC消息传递给 Browser process</li></ul> <blockquote><ul><li>滚动页面，合成器线程会创建另外一个合成帧发送给GPU再次进行渲染</li> <li>合成器的优点在于，其工作无关主线程.合成器线程不需要等待样式计算或者 JS 执行</li></ul></blockquote></li></ol> <h2 id="_4、浏览器对事件的处理"><a href="#_4、浏览器对事件的处理" class="header-anchor">#</a> 4、浏览器对事件的处理</h2> <h3 id="事件处理"><a href="#事件处理" class="header-anchor">#</a> 事件处理</h3> <blockquote><p>对tab内内容的处理由Renderer process 控制</p></blockquote> <ol><li>用户触发注入touch等手势，Browser process会发送时间类型及相应的坐标个Renderer process，Renderer process随后会找到事件对象并执行绑定再上面的事件处理函数</li> <li>涉及 non-fast scrollable region（绑定事件区域） 的事件，合成器线程会通知主线程进行相关处理</li> <li>web 开发中常用的事件处理模式是事件委托，基于事件冒泡，我们常常在顶层绑定事件</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>	document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchstart'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>target <span class="token operator">===</span> area<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="center-container"><p>整个页面都成了 non-fast scrollable region（绑定事件区域） 了，流畅的合成器独立处理合成帧的模式就失效了</p></div><p>解决方法1:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>@param passive<span class="token operator">:</span><span class="token boolean">true</span> <span class="token comment">//能让浏览器即监听相关事件，又让组合器线程在等主线程响应前构建新的组合帧</span>
@event<span class="token punctuation">.</span>cancelable <span class="token comment">//使用 `passive: true` 可以实现平滑滚动，但是垂直方向的滚动可能会先于`event.</span>
<span class="token comment">//preventDefault()`发生,此时可以通过 `event.cancelable` 来防止这种情况</span>
document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'pointermove'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>cancelable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// block the native scroll</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>passive<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>解决方法2：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/*使用css属性 `touch-action` 来完全消除事件处理器的影响*/</span>
<span class="token selector">#area</span> <span class="token punctuation">{</span> 
  <span class="token property">touch-action</span><span class="token punctuation">:</span> pan-x<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="查找事件对象"><a href="#查找事件对象" class="header-anchor">#</a> 查找事件对象</h3> <blockquote><p>主线程依据绘制记录查找事件相关元素
当组合器线程发送输入事件给主线程时，主线程首先会进行<code>命中性测试</code>(hit test) 查找对应的事件，命中测试会基于渲染过程生成绘制记录（paint records），查找事件发生坐标下存在的元素</p></blockquote> <h3 id="事件的优化"><a href="#事件的优化" class="header-anchor">#</a> 事件的优化</h3> <ol><li><p>一般屏幕的刷新速率是60fps ，但是某些事件的触发量会超过这个值，出于优化的目的，Chrome会合并连续的事件（如Wheel,mousewhell,mousemove,pointmove,touchmove）,并延迟到下一帧渲染的时候执行</p></li> <li><p>而如 keydown,keyup,mouseup,mousedown,touchstart和touchend等非连续性事件则会立即触发</p></li></ol> <blockquote><p>合并事件虽然能提示性能，但是如果你的应用是绘画等，则很难绘制一条平滑的曲线了，此时可以使用 <code>getCoalescedEvents</code> API 来获取组合的事件。示例代码如下：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'pointermove'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> events <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">getCoalescedEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> event <span class="token keyword">of</span> events<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> x <span class="token operator">=</span> event<span class="token punctuation">.</span>pageX<span class="token punctuation">;</span>
        <span class="token keyword">const</span> y <span class="token operator">=</span> event<span class="token punctuation">.</span>pageY<span class="token punctuation">;</span>
        <span class="token comment">// draw a line using x and y coordinates.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></div></div> <div class="page-slot page-slot-bottom"><!-- 横向自适应 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com//julie7366/blog/edit/master/docs/01.编程/42.浏览器架构及原理/01.浏览器多进程架构及工作原理.md" target="_blank" rel="noopener noreferrer">编辑</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021/07/22, 09:07:42</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/blog/pages/9ff194/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">前端性能优化</div></a> <a href="/blog/pages/abc2a4/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">学习路径</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog/pages/9ff194/" class="prev">前端性能优化</a></span> <span class="next"><a href="/blog/pages/abc2a4/">学习路径</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/blog/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/blog/pages/82d9c1/"><div>react全家桶搭建全家桶模板</div></a> <span>10-19</span></dt></dl><dl><dd>02</dd> <dt><a href="/blog/pages/996061/"><div>react学习到搭建一个全家桶的基础模板</div></a> <span>10-09</span></dt></dl><dl><dd>03</dd> <dt><a href="/blog/pages/0cc927/"><div>202108自修图</div></a> <span>09-24</span></dt></dl> <dl><dd></dd> <dt><a href="/blog/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2020-2021
    <span>Ni Ni | <a href="https://github.com/julie7366/blog" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><i class="close-but">×</i> <div><!-- 固定160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;max-width:160px;max-height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;right:65px;bottom:0px;width:135px;height:300px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2d_canvas" width="135" height="300" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:135px;height:300px;"></canvas></div><div></div></div></div>
    <script src="/blog/assets/js/app.93650501.js" defer></script><script src="/blog/assets/js/2.28e4b149.js" defer></script><script src="/blog/assets/js/38.e1cdaafe.js" defer></script>
  </body>
</html>